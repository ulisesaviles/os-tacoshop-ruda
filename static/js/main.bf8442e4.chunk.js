(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[0],{15:function(e,a,t){},17:function(e,a,t){"use strict";t.r(a);var n=t(2),r=t.n(n),s=t(9),c=t.n(s),i=t(1),l=t.n(i),o=t(3),u=t(4),d=(t(15),t(8)),j=function(e,a){var t=function(){var e=localStorage.getItem("orders");return JSON.parse(e)};return{getAllOrders:t,setOrders:function(n){var r=t();r[a]=n,e(r),localStorage.setItem("orders",JSON.stringify(r))}}},m=function(e,a){var t=function(e){return new Promise((function(a){return setTimeout(a,e)}))},n=function(){var e=Object(o.a)(l.a.mark((function e(n){var c,i,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=r(),i=0;case 2:if(!(i<n.length)){e.next=11;break}return o=n[i],c[a].fillings[o]--,e.next=7,t(500);case 7:s("fillings",c[a].fillings);case 8:i++,e.next=2;break;case 11:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),r=function(){var e=localStorage.getItem("metadata");return JSON.parse(e)},s=function(t,n){var s=r();s[a][t]=n,e(s),localStorage.setItem("metadata",JSON.stringify(s))};return{getMetadata:r,setMetadata:s,consumeFillings:n,useTortilla:function(){var e=r();e[a].tortillas--,s("tortillas",e[a].tortillas)},madeTaco:function(){var t=r();t[a].queueLength--,t[a].workingOn=null,t[a].rest.untilNeeded--,t[a].fan.untilNeeded--,e(t),localStorage.setItem("metadata",JSON.stringify(t))}}},O=function(e,a,t,n,r){var s=function(e){return new Promise((function(a){return setTimeout(a,e)}))},c=j(t,e),i=m(n,e),u=[],O=function(){return c.getAllOrders()[e]},h=function(a){r.log("Taquero de ".concat(e,":"),a)},b=function(){var e=Object(o.a)(l.a.mark((function e(a){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=["salsa","guacamole","cilantro","cebolla"],e.next=3,i.consumeFillings(t);case 3:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),f=function(){var e=Object(o.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==O().length){e.next=2;break}return e.abrupt("return");case 2:return e.next=5,g();case 5:if(0!==e.sent){e.next=8;break}return e.abrupt("break",10);case 8:e.next=2;break;case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),g=function(){var e=Object(o.a)(l.a.mark((function e(){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=O(),a=u.shift(),i.setMetadata("workingOn",a),i.useTortilla(),e.next=6,s(1e3);case 6:return e.next=8,b(a);case 8:return c.setOrders(u),i.madeTaco(),h("Finished an order, ".concat(u.length," left")),e.abrupt("return",u.length);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return{name:e,insertToQueue:function(e){return u=[].concat(Object(d.a)(O()),Object(d.a)(e)),c.setOrders(u),h("Inserted ".concat(e.length," element(s) succesfully")),i.setMetadata("queueLength",u.length),u},getQueueSize:function(){return O().length},workOnNextOrder:g,getOrders:O,startWorking:f}},h=function(e){return{log:function(a,t){var n=JSON.parse(localStorage.getItem("logs"));n.unshift({title:a,message:t,time:Date.now()}),e(n),localStorage.setItem("logs",JSON.stringify(n))}}},b=function(e,a,t){var n=function(e){for(var a=[],t=0;t<e;t++)a.push("Order ".concat(t));return a};return{start:function(){for(var a=0;a<e.length;a++)e[a].insertToQueue(n(5))},insertTaquero:function(a,r){e[t.indexOf(a)].insertToQueue(n(r))}}},f=t(0),g=function(){var e=Object(n.useState)(!1),a=Object(u.a)(e,2),t=a[0],r=a[1],s=Object(n.useState)(!0),c=Object(u.a)(s,2),i=c[0],d=c[1],j=Object(n.useState)(0),m=Object(u.a)(j,2),g=m[0],x=m[1],N=Object(n.useState)([]),p=Object(u.a)(N,2),v=p[0],w=p[1],M=h(w),q=[{name:"tripa y cabeza",canWorkOn:["tripa","cabeza"]},{name:"asada y suadero (1)",canWorkOn:["asada","suadero"]},{name:"asada y suadero (2)",canWorkOn:["asada","suadero"]},{name:"adobada",canWorkOn:["adobada"]}],S=function(e){for(var a={},t=0;t<e.length;t++){a[e[t].name]=[]}return a}(q),T=Object(n.useState)(S),k=Object(u.a)(T,2),R=(k[0],k[1]),C={workingOn:null,queueLength:0,fan:{active:!1,untilNeeded:600},rest:{untilNeeded:1e3,timeRested:0},tortillas:50,quesadillasSpaceOccupied:0,fillings:{salsa:150,guacamole:100,cilantro:200,cebolla:200}},y=function(e){for(var a={},t=0;t<e.length;t++){a[e[t].name]=C}return a},J=Object(n.useState)(y(q)),I=Object(u.a)(J,2),W=I[0],A=I[1],D=q.map((function(e){return O(e.name,e.canWorkOn,R,A,M)})),L=b(D,null,q),Q=function(e){var a=new Date(e);return"".concat(a.getHours(),":").concat(a.getMinutes(),":").concat(a.getSeconds()," (").concat(a.getMilliseconds(),"ms)")},F=function(){for(var e=0;e<D.length;e++)if(D[e].getQueueSize()>0)return!1;return!0},z=function(){var e=Object(o.a)(l.a.mark((function e(){var a,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=2;break}return e.abrupt("return");case 2:for(r(!0),localStorage.setItem("logs",JSON.stringify([])),w([]),L.start(),a=0;a<D.length;a++)D[a].startWorking();n=0;case 7:return e.next=10,P(100);case 10:if(x((n+=.1).toFixed(1)),!F()){e.next=14;break}return e.abrupt("break",16);case 14:e.next=7;break;case 16:r(!1);case 17:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),P=function(e){return new Promise((function(a){return setTimeout(a,e)}))};return Object(n.useEffect)((function(){i&&(d(!1),localStorage.setItem("orders",JSON.stringify(S)),localStorage.setItem("logs",JSON.stringify([])),localStorage.setItem("metadata",JSON.stringify(y(q))))})),Object(f.jsxs)("div",{className:"App",children:[Object(f.jsxs)("div",{className:"header",children:[Object(f.jsx)("img",{src:"https://raw.githubusercontent.com/ulisesaviles/os-tacoshop-ruda/main/RUDA.png",className:"logo",alt:"logo"}),t?Object(f.jsx)("div",{className:"running",children:"Running RUDA..."}):Object(f.jsx)("button",{onClick:z,className:"startBtn",children:"Start RUDA"}),Object(f.jsxs)("p",{className:"chrono",children:["(",g,"s)"]})]}),Object(f.jsxs)("div",{className:"contentContainer",children:[Object(f.jsx)("div",{className:"contentLeftContainer",children:Object(f.jsx)("div",{className:"taquerosContainer",children:q.map((function(e){var a=q.indexOf(e);return Object(f.jsxs)("div",{className:"taqueroContainer",children:[Object(f.jsxs)("h4",{className:"taqueroName",children:["Taquero de ",e.name]}),Object(f.jsxs)("div",{className:"taqueroMetadataContainer",children:[Object(f.jsx)("h3",{className:"metadata",children:"Metadata"}),Object(f.jsxs)("div",{className:"taqueroMetadataRowContainer",children:[Object(f.jsx)("h6",{className:"taqueroMetadataRowTitle",children:"Orders in queue:"}),Object(f.jsx)("p",{className:"actualMetadata",children:W[e.name].queueLength})]}),Object(f.jsxs)("div",{className:"taqueroMetadataRowContainer",children:[Object(f.jsx)("h6",{className:"taqueroMetadataRowTitle",children:"Working on:"}),Object(f.jsx)("p",{className:"actualMetadata",children:null===W[e.name].workingOn?"null":W[e.name].workingOn})]}),Object(f.jsxs)("div",{className:"taqueroMetadataRowContainer",children:[Object(f.jsx)("h6",{className:"taqueroMetadataRowTitle",children:"Fan active:"}),Object(f.jsx)("p",{className:"actualMetadata",children:JSON.stringify(W[e.name].fan.active)})]}),Object(f.jsxs)("div",{className:"taqueroMetadataRowContainer",children:[Object(f.jsx)("h6",{className:"taqueroMetadataRowTitle",children:"Tacos untill turn on the fan:"}),Object(f.jsx)("p",{className:"actualMetadata",children:W[e.name].fan.untilNeeded})]}),Object(f.jsxs)("div",{className:"taqueroMetadataRowContainer",children:[Object(f.jsx)("h6",{className:"taqueroMetadataRowTitle",children:"Chal\xe1n:"}),Object(f.jsx)("p",{className:"actualMetadata",children:"X"})]}),Object(f.jsxs)("div",{className:"taqueroMetadataRowContainer",children:[Object(f.jsx)("h6",{className:"taqueroMetadataRowTitle",children:"Time rested:"}),Object(f.jsx)("p",{className:"actualMetadata",children:W[e.name].rest.timeRested})]}),Object(f.jsxs)("div",{className:"taqueroMetadataRowContainer",children:[Object(f.jsx)("h6",{className:"taqueroMetadataRowTitle",children:"Tacos untill next full rest:"}),Object(f.jsx)("p",{className:"actualMetadata",children:W[e.name].rest.untilNeeded})]}),Object(f.jsxs)("div",{className:"taqueroMetadataRowContainer",children:[Object(f.jsx)("h6",{className:"taqueroMetadataRowTitle",children:"Tortillas"}),Object(f.jsx)("p",{className:"actualMetadata",children:W[e.name].tortillas})]}),Object(f.jsxs)("div",{className:"taqueroMetadataRowContainer",children:[Object(f.jsx)("h6",{className:"taqueroMetadataRowTitle",children:"Quesadillas space occupied:"}),Object(f.jsx)("p",{className:"actualMetadata",children:W[e.name].quesadillasSpaceOccupied})]}),Object(f.jsxs)("div",{className:"taqueroMetadataRowContainer",children:[Object(f.jsx)("h6",{className:"taqueroMetadataRowTitle",children:"Cilantro:"}),Object(f.jsx)("p",{className:"actualMetadata",children:W[e.name].fillings.cilantro})]}),Object(f.jsxs)("div",{className:"taqueroMetadataRowContainer",children:[Object(f.jsx)("h6",{className:"taqueroMetadataRowTitle",children:"Cebolla:"}),Object(f.jsx)("p",{className:"actualMetadata",children:W[e.name].fillings.cebolla})]}),Object(f.jsxs)("div",{className:"taqueroMetadataRowContainer",children:[Object(f.jsx)("h6",{className:"taqueroMetadataRowTitle",children:"Salsa:"}),Object(f.jsx)("p",{className:"actualMetadata",children:W[e.name].fillings.salsa})]}),Object(f.jsxs)("div",{className:"taqueroMetadataRowContainer",children:[Object(f.jsx)("h6",{className:"taqueroMetadataRowTitle",children:"Guacamole:"}),Object(f.jsx)("p",{className:"actualMetadata",children:W[e.name].fillings.guacamole})]})]})]},a)}))})}),Object(f.jsxs)("div",{className:"logsContainer",children:[Object(f.jsx)("h2",{className:"logsTitle",children:"Logs:"}),Object(f.jsx)("p",{className:"logsSubtitle",children:"(De m\xe1s nuevo a m\xe1s viejo)"}),Object(f.jsx)("div",{className:"logsContentContainer",children:v.map((function(e){return Object(f.jsxs)("div",{className:"logContainer",children:[Object(f.jsxs)("div",{className:"logHeaderContainer",children:[Object(f.jsx)("h5",{className:"logTitle",children:e.title}),Object(f.jsx)("p",{className:"logTime",children:Q(e.time)})]}),e.message]})}))})]})]})]})};c.a.render(Object(f.jsx)(r.a.StrictMode,{children:Object(f.jsx)(g,{})}),document.getElementById("root"))}},[[17,1,2]]]);
//# sourceMappingURL=main.bf8442e4.chunk.js.map